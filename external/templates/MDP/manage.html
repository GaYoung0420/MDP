<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/MDP_main_fragment :: top('manage')"></head>
<body>
    <div id = top>
        <div id="top_wrapper">
            <div id="image_wrapper">
                <a href='/MDP/main'><img  src="/img/MDP/logo_2.png"></a>
            </div>
            <div class="logout" onclick="location.href='/MDP/logout'" th:text="LOGOUT"></div>
            <div class="user_icon center" >
                <div style="display: inline-block; margin-right:7px;">
                    <div class="center" style="flex-direction: column;">
                        <div class="user_head"></div>
                        <div class="user_body"></div>    
                    </div>
                </div>
                <div class="userid" >
                    <span>관리자 : </span><span class="half-highlight" sec:authentication="name"></span>
                </div>
            </div>
        </div>
    </div>

    <div id="process_wrapper">
        <div class="process_div">
            <div class="process_div2" >
                <img src = "/img/MDP/main_logo_white_process.png" class="process_logo" >
                <hr id = "horizontal_line">          
                <div class="group">
                    <div style="color:white; font-size:30px; font-family: gmarket_bold;">관리자 페이지</div>
                    <br>
                    <input type="radio" name="menu" id="rb1" value="1" checked = "true" onclick="location.href='/MDP/admin/manage'"/>
                    <label for="rb1" >구매코드 관리</label><br>
                </div>
            </div>
        </div>

        <div class="content">                  
            <div id = "codeManage">
                <div style="margin-top:50px; margin-bottom: 30px; width:100%; color:#043383; font-size:30px; font-family: gmarket_bold; text-align: center;">구매코드 관리</div>
                <div>  
                    <div style="text-align:left; padding-left:10px; width: 300px; display: table-cell">아이디(user) 검색</div>
                    <div style=" text-align:left;padding-left:70px; width: 300px; display: table-cell">구매코드 추가</div>
                    <form action="search" method="GET" >
                        <input name = "searchText" type ="textbox" class="search_textbox" >
                        <input id = "searchButton" type="submit" class="searchbtn" value="검색" >
                    </form>
                    <form action="add" method="GET" >
                        <input name = "count" type ="number" class="search_textbox" min="1">
                        <input id = "addButton" type="submit" class="searchbtn" value="추가" >
                    </form>
                    <button class="searchbtn" style="float: right;" onclick="location.href='/MDP/admin/manage'">새로고침</button>
                </div>
                
                <table>
                    <tr>
                        <td style="background-color:#043383;color:white;">id</td>
                        <td style="background-color:#043383;color:white;">code</td>
                        <td style="background-color:#043383;color:white;">user</td>
                        <td style="background-color:#043383;color:white;">dateTime</td>
                    </tr>
                    <tr th:each = "row:${list}">
                        <td th:text="${row.id}">id</td>
                        <td th:text="${row.code}">code</td>
                        <td th:text="${row.user}">user</td>
                        <td th:text="${row.dateTime}">dateTime</td>
                    </tr>
                </table>

                <!-- 페이징 -->
                <div class="Board-pagination">
                    <ul class="pagination justify-content-center">
                    <li class="page-item">
                        <a class="page-link" th:classappend="${i == list.pageable.pageNumber+1} ? 'disabled'"
                        th:href="@{/MDP/admin/manage(    page=${0}, searchText=${param.searchText}    )   }"
                        tabindex="-1" aria-disabled="true">«</a>
                    </li>
                    <li class="page-item disabled">
                        <a class="page-link" th:classappend="${i == list.pageable.pageNumber+1} ? 'disabled'"
                        th:href="@{/MDP/admin/manage(    page=${list.pageable.pageNumber -1 }, searchText=${param.searchText}    )   }"
                        tabindex="-1" aria-disabled="true">◀</a>
                    </li>
                    <li class="page-item" th:classappend="${i == list.pageable.pageNumber+1} ? 'disabled'"
                        th:each="i : ${#numbers.sequence(startPage, endPage)}"><a class="page-link" id="num" 
                        th:href="@{/MDP/admin/manage(page=${i-1}, searchText=${param.searchText})}" th:text="${i}" th:value="${pages}">1</a></li>
                    <li class="page-item">
                        <a class="page-link" th:classappend="${list.totalPages == list.pageable.pageNumber+1} ? 'disabled'"
                        th:href="@{/MDP/admin/manage(page=${list.pageable.pageNumber +1 }, searchText=${param.searchText})}">▶</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" th:classappend="${list.totalPages == list.pageable.pageNumber+1} ? 'disabled'"
                        th:href="@{/MDP/admin/manage(page=${list.totalPages-1}, searchText=${param.searchText})}">»</a>
                    </li>
                    </ul>
                </div>
            </div>
        </div>
    
    </div>
</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    //현재 페이지값 받아오기 -> 현재페이지 폰트 굵게 설정
    // function getParameterByName(name){
    //     name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    //     var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(location.search);
    //     return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    // }

</script>